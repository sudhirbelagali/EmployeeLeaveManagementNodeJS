<html lang="en">

{{> head}}

<body>
    {{> header}}
    <div class="container">
        <button class="btn btn-success" data-toggle="modal" data-target="#myModalAdd">Add New</button>
        <table class="table table-striped" id="mytable">
            <thead>
                <tr>
                    <th>Employee ID</th>
                    <th> Name</th>
                    <th>Password</th>
                    <th>Mobile</th>
                    <th>Email</th>
                    <th>Aadhaar</th>
                    <th>Department</th>
                    <th>DoB</th>
                    <th>Salary</th>
                    <th>DoJ</th>
                </tr>
            </thead>
            <tbody>
                {{#each results}}
                <tr>
                    <td>{{ id }}</td>
                    <td>{{ name }}</td>
                    <td>{{ password }}</td>
                    <td>{{ mobile }}</td>
                    <td>{{ email }}</td>
                    <td>{{ aadhaar }}</td>
                    <td>{{ department }}</td>
                    <td>{{ dob }}</td>
                    <td>{{ salary }}</td>
                    <td>{{ doj }}</td>
                    <td>
                        <a href="javascript:void(0);" class="btn btn-sm btn-info edit" data-id="{{ id }}"
                            data-name="{{ name }}" data-password="{{ password }}" data-mobile="{{ mobile }}"
                            data-email="{{ email }}" data-aadhaar="{{ aadhaar }}" data-department="{{ department }}"
                            data-dob="{{ dob }}" data-salary="{{ salary }}" data-doj="{{ doj }}">Edit</a>
                        <a href="javascript:void(0);" class="btn btn-sm btn-danger delete" data-id="{{ id }}">Delete</a>
                    </td>
                </tr>
                {{/each}}
            </tbody>
        </table>
    </div>

    <!-- Modal Add Employee-->
    <form action="/save" method="post">
        <div class="modal fade" id="myModalAdd" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
            aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Add New Employee</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <input type="text" name="txt_id" value="{{ randomid}}" class="form-control" readonly>
                        </div>
                        <div class="form-group">
                            <input type="text" name="txt_name" class="form-control" placeholder="Name" required>
                        </div>
                        <div class="form-group">
                            <input type="password" name="txt_password" class="form-control" placeholder="Password"
                                required>
                        </div>
                        <div class="form-group">
                            <input type="number" name="txt_mobile" class="form-control" placeholder="Cellphone"
                                required>
                        </div>
                        <div class="form-group">
                            <input type="text" name="txt_email" class="form-control" placeholder="Email" required>
                        </div>
                        <div class="form-group">
                            <input type="number" name="txt_aadhaar" class="form-control" placeholder="Aadhaar" required>
                        </div>
                        <div class="form-group">
                            <select name="txt_department" class="form-control" required>
                                <option value="CSE">CSE</option>
                                <option value="CSE">ECE</option>
                                <option value="CE">CE</option>
                                <option value="HR">HR</option>
                                <option value="Programming">Programming</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <input type="date" name="txt_dob" class="form-control" placeholder="Date of Borth" required>
                        </div>
                        <div class="form-group">
                            <input type="number" name="txt_salary" class="form-control" placeholder="Salary" required>
                        </div>
                        <div class="form-group">
                            <input type="date" name="txt_doj" class="form-control" placeholder="Date of Joining"
                                required>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        {{!-- <input type="submit" value="Save"> --}}
                        <button type="submit" class="btn btn-primary">Save</button>
                    </div>
                </div>
            </div>
        </div>
    </form>

    <!-- Modal Update Product-->
    <form action="/update" method="post">
        <div class="modal fade" id="EditModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
            aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Edit Employee</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <input type="text" name="txt_name" class="form-control txt_name" placeholder="Name"
                                required>
                        </div>

                        <div class="form-group">
                            <input type="password" name="txt_password" class="form-control txt_password"
                                placeholder="Password" required>
                        </div>
                        <div class="form-group">
                            <input type="number" name="txt_mobile" class="form-control txt_mobile" placeholder="mobile"
                                required>
                        </div>
                        <div class="form-group">
                            <input type="text" name="txt_email" class="form-control txt_email" placeholder="Email"
                                required>
                        </div>
                        <div class="form-group">
                            <input type="number" name="txt_aadhaar" class="form-control txt_aadhaar"
                                placeholder="aadhaar" required>
                        </div>
                        <div class="form-group">
                            <select name="txt_department" class="form-control txt_department" required>
                                <option value="CSE">CSE</option>
                                <option value="CSE">ECE</option>
                                <option value="CE">CE</option>
                                <option value="HR">HR</option>
                                <option value="Programming">Programming</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <input type="date" name="txt_dob" class="form-control txt_dob" placeholder="DoB" required>
                        </div>
                        <div class="form-group">
                            <input type="number" name="txt_salary" class="form-control txt_salary" placeholder="Salary"
                                required>
                        </div>
                        <div class="form-group">
                            <input type="date" name="txt_doj" class="form-control txt_doj" placeholder="Date of Joining"
                                required>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <input type="hidden" name="id" class="product_id">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Update</button>
                    </div>
                </div>
            </div>
        </div>
    </form>

    <!-- Modal Delete Product-->
      <form id="add-row-form" action="/delete" method="post">
         <div class="modal fade" id="DeleteModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
               <div class="modal-content">
                   <div class="modal-header">
                                        <h5 class="modal-title" id="myModalLabel">Delete Product</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                   </div>
                   <div class="modal-body">
                                                 <strong>Are you sure to delete this data?</strong>
                   </div>
                   <div class="modal-footer">
                                            <input type="hidden" name="id" class="form-control id2" required>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-success">Delete</button>
                   </div>
                    </div>
            </div>
         </div>
     </form>

    <script src="/js/jquery-3.4.1.min.js"></script>
    <script src="/js/bootstrap.js"></script>
    <script>
        $(document).ready(function () {
            //showing data to edit modal      
            $('#mytable').on('click', '.edit', function () {
                var id = $(this).data('id');
                var name = $(this).data('name');
                var password = $(this).data('password');
                var mobile = $(this).data('mobile');
                var email = $(this).data('email');
                var aadhaar = $(this).data('aadhaar');
                var department = $(this).data('department');
                var dob = $(this).data('dob');
                var salary = $(this).data('salary');
                var doj = $(this).data('doj');

                $('#EditModal').modal('show');
                $('.txt_name').val(name);
                $('.txt_password').val(password);
                $('.txt_mobile').val(mobile);
                $('.txt_email').val(email);
                $('txt_aadhaar').val(aadhaar);
                $('txt_department').val(department);
                $('txt_dob').val(dob);
                $('txt_salary').val(salary);
                $('txt_doj').val(doj);
            });
            //showing delete record modal
            $('#mytable').on('click', '.delete', function () {
                var id = $(this).data('id');
                $('#DeleteModal').modal('show');
                $('.id2').val(id);
            });

        });
    </script>
</body>
{{> footer}}

</html>